
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="./css/bootstrap.min.css" rel="stylesheet" >
    <title>v1.6</title>
    <style>
        body{
            background-image: url('./assests/img/kosmos.jpg');
            background-position: center;
            background-size: cover;
            background-repeat: no-repeat;
        }
        body, html {
            height: 100%;
            width: 100%;
            margin: 0;
        }
        .column {
            height: 100%;
        }
        .left, .right {
            width: 25%;
            text-align: center;
        }
        
        .left img, .right img{
            width: 50%;
        }

        .center {
            width: 50%;
        }

        .center table {
            height: 100%;
            width: 100%;
        }

        body table{
            width: 100%;
            height: 100%;
        }

        .table-ranking{
            width: 100%;
            height: auto !important;
            background-color: #ffffff;
            position: relative;
            border-radius: 15px;
            padding: 10px;
        }
        .table-ranking td{
            padding: 5px;
            border-bottom: #505050 solid 1px;
        }
    </style>
</head>
<body>
    <table>
        <tr>
            <td class="left">
                <img src="./assests/img/logo.png" class="d-block mx-auto logo" alt="Responsive image">
            </td>
            <td class="center" align="center">
                <div id="carousel-ranking" class="carousel slide w-100" data-ride="carousel" data-interval="10000" data-pause="false" >
                    <div class="carousel-inner">
                        <!--CATEGORIA ESPECIAL-->
                        <div class="carousel-item active">
                            <table>
                                <tr>
                                    <td style="vertical-align: bottom;">
                                        <img src="./assests/img/head_ranking_toyota_tsusho_group.png" width="100%">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="vertical-align: top;padding-top: 20px;">
                                        <img src="./assests/img/head_cat_especial.png" width="100%">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="vertical-align: top;">
                                        <div style="background-color: #ffffff;position: relative; height: auto; border-radius: 15px; padding: 10px;font-size: 22px;">
                                            <table class="table-ranking">
                                                <tr>
                                                    <td align="center"><b>#</b></td>
                                                    <td><b>Nome</b></td>
                                                    <td><b>Pontos</b></td>
                                                </tr>
                                                <tbody id="ranking-cat-especial"><tr><td colspan="3">Carregando dados ...</td></tr></tbody>
                                            </table>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <!--PATROCINADOR-->
                        <div class="carousel-item">
                            <table style="width: 80%;">
                                <tr>
                                    <td style="vertical-align: bottom;">
                                        <img src="./assests/img/carvalho-e-costa.png" width="100%">
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <!--CATEGORIA A-->
                        <div class="carousel-item">
                            <table>
                                <tr>
                                    <td style="vertical-align: bottom;">
                                        <img src="./assests/img/head_ranking_toyota_tsusho_group.png" width="100%">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="vertical-align: top;padding-top: 20px;">
                                        <img src="./assests/img/head_cat_a.png" width="100%">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="vertical-align: top;">
                                        <div style="background-color: #ffffff;position: relative; height: auto; border-radius: 15px; padding: 10px;font-size: 22px;">
                                            <table class="table-ranking">
                                                <tr>
                                                    <td align="center"><b>#</b></td>
                                                    <td><b>Nome</b></td>
                                                    <td><b>Pontos</b></td>
                                                </tr>
                                                <tbody id="ranking-cat-a"><tr><td colspan="3">Carregando dados ...</td></tr></tbody>
                                            </table>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <!--PATROCINADOR-->
                        <div class="carousel-item">
                            <table style="width: 80%;">
                                <tr>
                                    <td style="vertical-align: bottom;">
                                        <img src="./assests/img/carvalho-e-costa.png" width="100%">
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <!--CATEGORIA B-->
                        <div class="carousel-item">
                            <table>
                                <tr>
                                    <td style="vertical-align: bottom;">
                                        <img src="./assests/img/head_ranking_toyota_tsusho_group.png" width="100%">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="vertical-align: top;padding-top: 20px;">
                                        <img src="./assests/img/head_cat_b.png" width="100%">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="vertical-align: top;">
                                        <div style="background-color: #ffffff;position: relative; height: auto; border-radius: 15px; padding: 10px;font-size: 22px;">
                                            <table class="table-ranking">
                                                <tr>
                                                    <td align="center"><b>#</b></td>
                                                    <td><b>Nome</b></td>
                                                    <td><b>Pontos</b></td>
                                                </tr>
                                                <tbody id="ranking-cat-b"><tr><td colspan="3">Carregando dados ...</td></tr></tbody>
                                            </table>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <!--CATEGORIA C-->
                        <div class="carousel-item">
                            <table>
                                <tr>
                                    <td style="vertical-align: bottom;">
                                        <img src="./assests/img/head_ranking_toyota_tsusho_group.png" width="100%">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="vertical-align: top;padding-top: 20px;">
                                        <img src="./assests/img/head_cat_c.png" width="100%">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="vertical-align: top;">
                                        <div style="background-color: #ffffff;position: relative; height: auto; border-radius: 15px; padding: 10px;font-size: 22px;">
                                            <table class="table-ranking">
                                                <tr>
                                                    <td align="center"><b>#</b></td>
                                                    <td><b>Nome</b></td>
                                                    <td><b>Pontos</b></td>
                                                </tr>
                                                <tbody id="ranking-cat-c"><tr><td colspan="3">Carregando dados ...</td></tr></tbody>
                                            </table>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <!--CATEGORIA INICIANTE-->
                        <div class="carousel-item">
                            <table>
                                <tr>
                                    <td style="vertical-align: bottom;">
                                        <img src="./assests/img/head_ranking_toyota_tsusho_group.png" width="100%">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="vertical-align: top;padding-top: 20px;">
                                        <img src="./assests/img/head_cat_iniciante.png" width="100%">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="vertical-align: top;">
                                        <div style="background-color: #ffffff;position: relative; height: auto; border-radius: 15px; padding: 10px;font-size: 22px;">
                                            <table class="table-ranking">
                                                <tr>
                                                    <td align="center"><b>#</b></td>
                                                    <td><b>Nome</b></td>
                                                    <td><b>Pontos</b></td>
                                                </tr>
                                                <tbody id="ranking-cat-iniciante"><tr><td colspan="3">Carregando dados ...</td></tr></tbody>
                                            </table>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <!--CATEGORIA DUPLAS OURO-->
                        <div class="carousel-item">
                            <table>
                                <tr>
                                    <td style="vertical-align: bottom;">
                                        <img src="./assests/img/head_ranking_toyota_tsusho_group.png" width="100%">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="vertical-align: top;padding-top: 20px;">
                                        <img src="./assests/img/head_cat_duplas_ouro.png" width="100%">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="vertical-align: top;">
                                        <div style="background-color: #ffffff;position: relative; height: auto; border-radius: 15px; padding: 10px;font-size: 22px;">
                                            <table class="table-ranking">
                                                <tr>
                                                    <td align="center"><b>#</b></td>
                                                    <td><b>Nome</b></td>
                                                    <td><b>Pontos</b></td>
                                                </tr>
                                                <tbody id="ranking-cat-DuplasOuro"><tr><td colspan="3">Carregando dados ...</td></tr></tbody>
                                            </table>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <!--CATEGORIA DUPLAS PRATA-->
                        <div class="carousel-item">
                            <table>
                                <tr>
                                    <td style="vertical-align: bottom;">
                                        <img src="./assests/img/head_ranking_toyota_tsusho_group.png" width="100%">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="vertical-align: top;padding-top: 20px;">
                                        <img src="./assests/img/head_cat_duplas_prata.png" width="100%">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="vertical-align: top;">
                                        <div style="background-color: #ffffff;position: relative; height: auto; border-radius: 15px; padding: 10px;font-size: 22px;">
                                            <table class="table-ranking">
                                                <tr>
                                                    <td align="center"><b>#</b></td>
                                                    <td><b>Nome</b></td>
                                                    <td><b>Pontos</b></td>
                                                </tr>
                                                <tbody id="ranking-cat-DuplasPrata"><tr><td colspan="3">Carregando dados ...</td></tr></tbody>
                                            </table>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <!--CATEGORIA DUPLAS 60+-->
                        <div class="carousel-item">
                            <table>
                                <tr>
                                    <td style="vertical-align: bottom;">
                                        <img src="./assests/img/head_ranking_toyota_tsusho_group.png" width="100%">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="vertical-align: top;padding-top: 20px;">
                                        <img src="./assests/img/head_cat_duplas_60+.png" width="100%">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="vertical-align: top;">
                                        <div style="background-color: #ffffff;position: relative; height: auto; border-radius: 15px; padding: 10px;font-size: 22px;">
                                            <table class="table-ranking">
                                                <tr>
                                                    <td align="center"><b>#</b></td>
                                                    <td><b>Nome</b></td>
                                                    <td><b>Pontos</b></td>
                                                </tr>
                                                <tbody id="ranking-cat-Dupla60"><tr><td colspan="3">Carregando dados ...</td></tr></tbody>
                                            </table>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </td>
            <td class="right">
                <img src="./assests/img/logo-tenis.png" class="d-block mx-auto logo" alt="Responsive image">
            </td>
        </tr>
    </table>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" ></script>
    <script src="./js/bootstrap.min.js" ></script>
    <script type="text/javascript">
        var dataTemp = null;

        $(document).ready(function() {
            $('#carousel-ranking').carousel('pause');   
            requestData();    
            setInterval(requestData, 1200000);
        });


        function requestData() {
            console.log('Requesting data');
            $.ajax({
                url: 'http://34.205.59.51/webscraper/scrape/',
                type: 'GET',
                success: function(data){
                    console.log('Sucesso');
                    dataTemp = data;
                    renderData(dataTemp);
                },
                error: function(){
                    console.log('Error');
                    if(dataTemp == null){
                        renderErrorScenary();
                    } else {
                        renderData(dataTemp);
                    }
                }
            });
        }


        function renderData(data){
            var tr = '';
            var cont = 1;
        
            for (var i = 0; i < data.length; i++) {
                var d = data[i];
                tr += '<tr>' +
                        '<td align="center">' +
                            d.position +
                            '&nbsp;&nbsp;&nbsp;' +
                            '<img width="55" height="55" style="border-radius: 50%;" align="center" src="' + d.image + '" alt="' + (i + 1) + '">' +
                        '</td>' +
                        '<td>' + d.name + '</td>' +
                        '<td>' + d.score + ' pts.</td>' +
                      '</tr>';

                if ((i + 1) % 8 === 0) {
                    var category = Math.floor(i / 8);
                    switch (category) {
                        case 0:
                            $('#ranking-cat-especial').html(tr);
                            break;
                        case 1:
                            $('#ranking-cat-a').html(tr);
                            break;
                        case 2:
                            $('#ranking-cat-b').html(tr);
                            break;
                        case 3:
                            $('#ranking-cat-c').html(tr);
                            break;
                        case 4:
                            $('#ranking-cat-iniciante').html(tr);
                            break;
                        case 5:
                            $('#ranking-cat-DuplasOuro').html(tr);
                            break;
                        case 6:
                            $('#ranking-cat-DuplasPrata').html(tr);
                            break;
                        case 7:
                            $('#ranking-cat-Dupla60').html(tr);
                            break;
                    }
                    tr = '';
                }
            }
            
            $('#carousel-ranking').carousel('cycle');
        }
        
        function renderErrorScenary() {
            var tr = '<tr><td colspan="4">Erro ao carregar os dados</td></tr>';
            $('#ranking-cat-especial').html(tr);
            $('#ranking-cat-a').html(tr);
            console.log('Erro ao carregar os dados');
            setTimeout(requestData, 10000);
        }
    </script>
</body>
</html>


